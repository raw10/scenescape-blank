allow_anonymous true

# Connection tolerance settings
max_connections -1
max_inflight_messages 20
max_queued_messages 1000
message_size_limit 0
connection_messages true
log_dest stdout
log_type error
log_type warning  
log_type notice
log_type information

# Secure MQTT with TLS on standard port 1883
listener 1883
cafile /mosquitto/secrets/root-cert
keyfile /mosquitto/secrets/broker-key
certfile /mosquitto/secrets/broker-cert
tls_version tlsv1.3

# WebSocket port with TLS for web browser connections
listener 1884
cafile /mosquitto/secrets/root-cert
keyfile /mosquitto/secrets/broker-key
certfile /mosquitto/secrets/broker-cert
protocol websockets
tls_version tlsv1.3
